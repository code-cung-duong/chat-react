(this["webpackJsonpchat-app-basic"]=this["webpackJsonpchat-app-basic"]||[]).push([[0],{267:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(41),c=n.n(a),r=n(188),s=n(42),l=(n(267),n(464)),d=n(465),u=n(12),b=n(8),p=n(27),j=n(476),h=n(477),x=n(478),f=n(479),m=n(480),O=n(481),v=n(482),g=n(468),y=n(469),w=n(474),N=n(111),k=n(471),C=n(475),S=n(124),I=n.n(S),A=n(244),R=n(142),V=n.n(R),F=n(28),M=n(3),U=n(112);n(274),n(275),n(276);U.a.initializeApp({apiKey:"AIzaSyCT6UcJ1fSROa6XrtINMkdxatAgSt5LU_s",authDomain:"huong-min-hoho.firebaseapp.com",databaseURL:"https://huong-min-hoho-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"huong-min-hoho",storageBucket:"huong-min-hoho.appspot.com",messagingSenderId:"316009393400",appId:"1:316009393400:web:3f95e2e0595156060b5f0d",measurementId:"G-69J2PN8Y5Z"}),U.a.analytics();var L=U.a.auth(),T=U.a.firestore();n(277);var z=U.a,E=function(e,t){var n=Object(o.useState)([]),i=Object(b.a)(n,2),a=i[0],c=i[1];return Object(o.useEffect)((function(){var n=T.collection(e).orderBy("createAt");if(t){if(!t.compareValue||!t.compareValue.length)return void c([]);n=n.where(t.fieldName,t.operator,t.compareValue)}return n.onSnapshot((function(e){var t=e.docs.map((function(e){return Object(M.a)(Object(M.a)({},e.data()),{},{id:e.id})}));c(t)}))}),[e,t]),a},_=n(463),B=n(6),P=i.a.createContext();var D=function(e){var t=e.children,n=Object(o.useState)({}),i=Object(b.a)(n,2),a=i[0],c=i[1],r=Object(o.useState)(!0),l=Object(b.a)(r,2),d=l[0],u=l[1],p=Object(s.f)();return Object(o.useEffect)((function(){var e=L.onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.email,o=e.uid,i=e.phoneNumber,a=e.photoURL,r=e.countNotify,s=e.status,l=e.last_changed;return c({displayName:t,email:n,uid:o,phoneNumber:i,photoURL:a,countNotify:r,status:s,last_changed:l}),u(!1),p.push("/"),void(document.title="Fake Messenger")}c({}),u(!1),p.push("/login"),document.title="Fake Messenger - \u0110\u0103ng nh\u1eadp"}));return function(){e()}}),[p]),Object(B.jsxs)(P.Provider,{value:{user:a,setUser:c},children:[d?Object(B.jsx)(_.a,{style:{fontSize:"20pt",position:"fixed",top:"50%",left:"50%"}}):t," "]})},J=i.a.createContext();var q,G,K=function(e){var t=e.children,n=Object(o.useState)(!1),i=Object(b.a)(n,2),a=i[0],c=i[1],r=Object(o.useState)(!1),s=Object(b.a)(r,2),l=s[0],d=s[1],u=Object(o.useState)(""),p=Object(b.a)(u,2),j=p[0],h=p[1],x=Object(o.useState)(!1),f=Object(b.a)(x,2),m=f[0],O=f[1],v=Object(o.useContext)(P).user.uid,g=Object(o.useMemo)((function(){return{fieldName:"members",operator:"array-contains",compareValue:v}}),[v]),y=E("rooms",g),w=Object(o.useMemo)((function(){return Array.from(y).find((function(e){return e.id===j}))||{}}),[y,j]),N=Object(o.useMemo)((function(){return{fieldName:"uid",operator:"in",compareValue:w.members}}),[w.members]),k=E("users",N);return Object(B.jsxs)(J.Provider,{value:{rooms:y,isAddRoomVisible:a,setIsAddRoomVisible:c,selectedRoomId:j,setSelectedRoomId:h,selectedRoom:w,members:k,isInviteMemberVisible:m,setIsInviteMemberVisible:O,clearState:function(){h(""),c(!1),O(!1)},isShowMembersVisible:l,setIsShowMembersVisible:d},children:[t," "]})},W=function(e,t){T.collection(e).add(Object(M.a)(Object(M.a)({},t),{},{createAt:z.firestore.FieldValue.serverTimestamp()}))},H=function(e,t){T.collection(e).doc(t.uid).set(Object(M.a)(Object(M.a)({},t),{},{createAt:z.firestore.FieldValue.serverTimestamp()}))},X=function(e){for(var t=e.split(" ").filter((function(e){return e})),n=t.length,o=[],i=[],a=[],c=0;c<n;c++)o[c]=!1;!function e(c){for(var r=0;r<n;r++)o[r]||(o[r]=!0,i[c]=t[r],c===n-1&&a.push(i.join(" ")),e(c+1),o[r]=!1)}(0);var r=a.reduce((function(e,t){var n=function(e){var t=[],n="";return e.split("").forEach((function(e){n+=e,t.push(n)})),t}(t);return[].concat(Object(u.a)(e),Object(u.a)(n))}),[]);return r.push("*"),r},Y=n(74),Z=n(467),Q=n(466),$=F.a.div(q||(q=Object(p.a)(["\n  margin-bottom: 17px;\n  margin-left: 9px;\n  display: flex;\n  width: 99%;\n  justify-content:flex-end;\n\n  .date {\n    margin-left: 10px;\n    font-size: 11px;\n    color: #a7a7a7;\n  }\n\n  .content {\n    overflow-y: visible;\n    color: #fff;\n    max-width: 400px;\n    min-width: 20px;\n    word-wrap:break-word;\n    font-size: 15px;\n    text-align: justify;\n  }\n\n  .ant-tooltip-inner{\n      magrin-left: '-20px';\n  }\n"]))),ee=F.a.div(G||(G=Object(p.a)(["\n    max-width: 800px;\n    background-color: #0099ff;\n    border: 1px solid #ddd;\n    border-radius: 30px;\n    padding: 3px 18px 5px 18px;\n    magrin-left: 10px;\n    min-width: 40px;\n    text-align: justify;\n"])));function te(e){var t="";return e&&(t=(t=Object(Q.a)(new Date(1e3*e),new Date)).charAt(0).toUpperCase()+t.slice(1)),t}var ne,oe,ie,ae=function(e){var t=e.text,n=e.createdAt;return Object(B.jsx)($,{children:Object(B.jsx)(ee,{children:Object(B.jsx)(Y.a,{placement:"left",title:te(null===n||void 0===n?void 0:n.seconds),children:Object(B.jsx)(Z.a.Text,{className:"content",children:t})})})})},ce=n(106),re=n.n(ce),se=F.a.div(ne||(ne=Object(p.a)(["\n  margin-bottom: 17px;\n  margin-left: 5px;\n  display: flex;\n  width: 900px;\n  justify-content:flex-start;\n\n  .date {\n    margin-left: 10px;\n    font-size: 11px;\n    color: #a7a7a7;\n  }\n\n  .content {  \n    overflow-y: visible;\n    color: #123;\n    max-width: 400px;\n    min-width: 20px;\n    word-wrap:break-word;\n    font-size: 15px;\n    text-align: justify;\n  }\n"]))),le=F.a.div(oe||(oe=Object(p.a)(["\n  magrin: 5px;\n  padding-right: 15px;\n"]))),de=F.a.div(ie||(ie=Object(p.a)(["\n    max-width: 800px;\n    background-color: rgb(228 230 235);\n    border: 1px solid #ddd;\n    border-radius: 30px;\n    padding: 3px 18px 5px 18px;\n    min-width: 40px;\n    text-align: justify;\n"])));function ue(e){var t="";return e&&(t=(t=Object(Q.a)(new Date(1e3*e),new Date)).charAt(0).toUpperCase()+t.slice(1)),t}var be,pe,je,he,xe,fe,me=function(e){var t=e.text,n=e.photoURL,o=e.displayName,i=e.createdAt;return Object(B.jsxs)(se,{children:[Object(B.jsx)(le,{children:Object(B.jsx)(Y.a,{title:o,placement:"left",children:Object(B.jsxs)(re.a,{size:"default",src:n,children:[n?"":o.charAt(0)," "]})})}),Object(B.jsx)(de,{children:Object(B.jsx)(Y.a,{placement:"left",style:{marginLeft:"10px"},title:ue(null===i||void 0===i?void 0:i.seconds),children:Object(B.jsx)(Z.a.Text,{className:"content",children:t})})})]})},Oe=F.a.div(be||(be=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  height: 56px;\n  padding: 0 16px;\n  align-items: center;\n  border-bottom: 1px solid rgb(230, 230, 230);\n  box-shadow: -3px 13px 6px -10px rgb(230 230 230);\n\n  .header {\n    &__info {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n\n    &__title {\n      margin: 0;\n      font-weight: bold;\n    }\n\n    &__description {\n      font-size: 12px;\n    }\n  }\n\n  .load{\n    fontSize: '56px',\n    color: '#08c',\n    position: 'absolute',\n    top: '50%',\n    left: '50%'\n  }\n\n  .settingIcon{\n      font-size: '15px';\n  }\n"]))),ve=F.a.div(pe||(pe=Object(p.a)(["\n  display: flex;\n  align-items: center;\n"]))),ge=F.a.div(je||(je=Object(p.a)(["\n  height: 100vh;\n"]))),ye=F.a.div(he||(he=Object(p.a)(["\n  height: calc(100% - 56px);\n  display: flex;\n  flex-direction: column;\n  padding: 11px;\n  justify-content: flex-end;\n"]))),we=Object(F.a)(g.a)(xe||(xe=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 2px 2px 2px 0;\n  border: 1px solid rgb(230, 230, 230);\n  border-radius: 2px;\n\n  .ant-form-item {\n    flex: 1;\n    margin-bottom: 0;\n  }\n"]))),Ne=F.a.div(fe||(fe=Object(p.a)(["\n  max-height: 100%;\n  overflow-y: auto;\n"])));var ke,Ce,Se,Ie=function(){var e=Object(o.useState)(""),t=Object(b.a)(e,2),n=t[0],i=t[1],a=Object(S.useForm)(),c=Object(b.a)(a,1)[0],r=Object(o.useContext)(J),s=r.selectedRoom,l=r.selectedRoomId,d=r.setSelectedRoomId,p=r.setIsInviteMemberVisible,I=r.setIsAddRoomVisible,R=r.setIsShowMembersVisible,F=r.members,M=Object(o.useContext)(P).user,U=M.uid,L=M.displayName,_=M.photoURL,D=(M.countNotify,Object(o.useRef)(null)),q=Object(o.useState)(!0),G=Object(b.a)(q,2),K=G[0],H=G[1],X=Object(o.useRef)(null),Y=Object(o.useState)(""),Z=Object(b.a)(Y,2),Q=Z[0],$=Z[1],ee=Object(o.useMemo)((function(){return{fieldName:"roomId",operator:"==",compareValue:l}}),[l]),te=E("messages",ee);Object(o.useEffect)((function(){H(!0),l&&D.current.focus()}),[l]);var ne=z.firestore().doc("/users/"+U),oe=Object(o.useMemo)((function(){return{status:"offline",last_changed:z.firestore.FieldValue.serverTimestamp()}}),[]),ie=Object(o.useMemo)((function(){return{status:"online",last_changed:z.firestore.FieldValue.serverTimestamp()}}),[]),ce=Object(o.useMemo)((function(){return{status:"away",last_changed:z.firestore.FieldValue.serverTimestamp()}}),[]);Object(o.useEffect)((function(){return z.database().ref(".info/connected").on("value",(function(e){if(!1!==(null===e||void 0===e?void 0:e.val())||void 0===U){if(void 0===U)null===ne||void 0===ne||ne.update(oe);else if(void 0!==U&&"hidden"!==Q){var t;null===(t=z.database().ref("/status/"+U))||void 0===t||t.onDisconnect().update(oe).then((function(){null===ne||void 0===ne||ne.update(ie)}))}}else null===ne||void 0===ne||ne.update(oe)}))}),[U]),window.addEventListener("unload",(function(){null===ne||void 0===ne||ne.update(oe)}));var re=Object(o.useCallback)((function(){void 0===U?null===ne||void 0===ne||ne.update(oe):"hidden"===document.visibilityState&&"hidden"!==Q&&void 0!==U?(null===ne||void 0===ne||ne.update(ce),$("hidden")):"visible"===document.visibilityState&&"visible"!==Q&&void 0!==U&&($("visible"),null===ne||void 0===ne||ne.update(ie))}),[]);Object(o.useEffect)((function(){document.addEventListener("visibilitychange",re,!1)}),[re]),Object(o.useEffect)((function(){return Object(A.delay)((function(){H(!1)}),10,""),function(){}}),[te]),Object(o.useEffect)((function(){var e=T.collection("notifys").doc(U).onSnapshot((function(t){var n,o,i=null===t||void 0===t||null===(n=t.data())||void 0===n?void 0:n.countNotify;l&&void 0!==i&&(null===(o=T.collection("notifys"))||void 0===o||o.doc(U).update({countNotify:Object(u.a)(Array.from(i).filter((function(e){return e!==l})))}),console.log("da xem"));return e}));return e}),[l]),Object(o.useLayoutEffect)((function(){X.current&&(X.current.scrollTop=X.current.scrollHeight)})),Object(o.useEffect)((function(){var e=T.collection("notifys").doc(U).onSnapshot((function(t){var n;console.log("tin nhan moi");var o,i=null===t||void 0===t||null===(n=t.data())||void 0===n?void 0:n.countNotify;"visible"!==document.visibilityState&&(null===(o=document.getElementsByClassName("audio")[0])||void 0===o||o.play());return document.title=0===i.length?"Fake Messenger":"("+i.length+") Fake Messenger",e}));return e}),[]);var se=function(){n.trim().length&&(W("messages",{text:n,uid:U,photoURL:_,displayName:L,roomId:l}),null===F||void 0===F||F.filter((function(e){return e.uid!==U})).forEach((function(e){T.collection("notifys").doc(e.id).get().then((function(t){T.collection("notifys").doc(e.id).update({countNotify:[].concat(Object(u.a)(t.data().countNotify),[l]),createAt:z.firestore.FieldValue.serverTimestamp()})}))})),c.setFieldsValue({message:""}),D.current.focus())},le=function(e){i(e.target.value)},de=Object(o.useMemo)((function(){return Object(B.jsxs)(y.a,{children:[Object(B.jsx)(y.a.Item,{onClick:function(){return R(!0)},icon:Object(B.jsx)(h.a,{}),children:"Xem th\xe0nh vi\xean"},"1"),Object(B.jsx)(y.a.Item,{onClick:function(){return p(!0)},icon:Object(B.jsx)(x.a,{}),children:"M\u1eddi b\u1ea1n b\xe8"},"2"),Object(B.jsx)(y.a.Item,{onClick:function(){return d("")},icon:Object(B.jsx)(f.a,{}),children:"Tho\xe1t"},"3")]})}),[R,p,d]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(V.a,{src:"mess.mp3",className:"audio"})," ",l?Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(ge,{children:[Object(B.jsxs)(Oe,{children:[Object(B.jsxs)("div",{className:"header__info",children:[Object(B.jsx)("p",{className:"header__title",children:s?s.name:""}),Object(B.jsx)("span",{className:"header__description",children:s?s.description:""})]}),Object(B.jsx)(ve,{children:Object(B.jsx)(C.a.Button,{style:{bordered:"none"},icon:Object(B.jsx)(v.a,{}),overlay:de})})]}),Object(B.jsxs)(ye,{children:[" ",!0===K?Object(B.jsx)(j.a,{spin:!0,style:{fontSize:"56px",color:"#08c",position:"absolute",top:"45%",left:"50%"}}):Object(B.jsxs)(Ne,{className:"listMessage",ref:X,children:[te.map((function(e){return e.uid===U?Object(B.jsx)(ae,{text:e.text,photoURL:e.photoURL,displayName:e.displayName,createdAt:e.createAt},e.id):Object(B.jsx)(me,{text:e.text,photoURL:e.photoURL,displayName:e.displayName,createdAt:e.createAt},e.id)}))," "]}),Object(B.jsxs)(we,{form:c,children:[Object(B.jsx)(g.a.Item,{name:"message",children:Object(B.jsx)(k.a,{ref:D,onChange:le,onPressEnter:se,placeholder:"Nh\u1ea5n t\u1ed5 h\u1ee3p Window + . \u0111\u1ec3 th\xeam emoji . . .",bordered:!1,autoComplete:"off"})}),Object(B.jsx)(N.a,{style:{width:"40px",color:"blue"},icon:Object(B.jsx)(O.a,{className:"settingIcon"}),onClick:se})]})," "]})]})}):Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(w.a,{icon:Object(B.jsx)(m.a,{spin:!0}),title:"Click ch\u1ecdn m\u1ed9t nh\xf3m \u0111\u1ec3 b\u1eaft \u0111\u1ea7u n\xe0o",style:{color:"red"},extra:Object(B.jsx)(N.a,{type:"primary",ghost:!0,onClick:function(){return I(!0)},children:"B\u1ea1n c\xf3 th\u1ec3 t\u1ea1o nh\xf3m v\xe0 m\u1eddi b\u1ea1n b\xe8 v\xe0o t\u1ea1i \u0111\xe2y"})})})]})},Ae=n(483),Re=n(484),Ve=n(472),Fe=Ve.a.Panel,Me=Object(F.a)(Fe)(ke||(ke=Object(p.a)(["\n  \n\n\n  &&& {\n    .ant-collapse-header\n    ,\n    p {\n      color: blue;\n      font-weight: 500;\n    }\n\n    .ant-collapse-content-box {\n      padding: 0 10px;\n      max-height: 290px;\n      overflow-y: auto;\n    }\n    .ant-typography:hover {\n      textShadow: rgb(222 222 222) 0px 0px 7px;\n      background-color: #f1f1f1;\n      transition: color 0.2s;\n    }\n\n    .ant-typography{\n      color: #000;\n      font-weight: 400;\n    }\n\n    .add-room {\n      color: #456;\n      margin: 15px 0 10px 90px;\n      padding: 3px 8px 5px 8px;      \n      border: 1px solid #aaa;\n    }\n\n    .add-room:hover{\n      color: #fff;\n      background-color: #ccc;\n      border: 1px solid #bbb;\n      box-shadow: 1px 1px 8px 0px #bbb;\n    }\n \n  }\n"]))),Ue=Object(F.a)(Z.a.Link)(Ce||(Ce=Object(p.a)(["\n  display: block;\n  margin-bottom: -1px;\n  color: #ddd; \n  padding: 15px 10px 15px 10px;\n  border-radius: 5px;\n  \n"]))),Le=Object(F.a)(Ve.a)(Se||(Se=Object(p.a)(["\n    border-bottom: 1px solid #ccc;\n    box-shadow: 0px 9px 7px -9px #ccc;\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n     \n    /* Track */\n    ::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); \n        -webkit-border-radius: 10px;\n        border-radius: 10px;\n    }\n     \n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        -webkit-border-radius: 10px;\n        border-radius: 10px;\n        background: #ccc; \n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); \n    }\n    ::-webkit-scrollbar-thumb:window-inactive {\n        background: rgba(255,0,0,0.4); \n    }\n\n"])));var Te,ze=function(){var e=Object(o.useContext)(J),t=e.rooms,n=e.setIsAddRoomVisible,i=e.setSelectedRoomId,a=e.selectedRoomId,c=Object(o.useContext)(P).user.uid;return Object(o.useEffect)((function(){console.log(t);var e=T.collection("notifys").doc(c).onSnapshot((function(n){return n.data().countNotify.forEach((function(e){var n=t.map((function(e){return e}));console.log(n)})),e}));return e}),[]),Object(B.jsx)(Le,{defaultActiveKey:"0",ghost:!0,children:Object(B.jsxs)(Me,{header:"Nh\xf3m c\u1ee7a b\u1ea1n",children:[0!==t.length?Object(B.jsx)(B.Fragment,{children:t.map((function(e){return Object(B.jsxs)(Ue,{onClick:function(){return i(e.id)},style:e.id===a?{textShadow:"rgb(222 222 222) 0px 0px 7px",backgroundColor:"#f1f1f1",transition:"all 0.2s",color:"#000"}:{},className:"chu",children:[e.name,Object(B.jsxs)(B.Fragment,{children:[" ",1===Array.from(e.members).length?Object(B.jsx)(Y.a,{title:"Nh\xf3m ch\u1ec9 c\xf3 m\xecnh b\u1ea1n, h\xe3y m\u1eddi th\xeam b\u1ea1n b\xe8.",placement:"right",children:Object(B.jsx)(Ae.a,{style:{fontSize:"16pt",float:"right"}})}):Object(B.jsx)(Y.a,{title:"Nh\xf3m c\xf3 c\u1ea3 b\u1ea1n b\xe8 c\u1ee7a b\u1ea1n",placement:"right",children:Object(B.jsx)(Re.a,{style:{fontSize:"16pt",float:"right"}})})," "]})]},e.id)}))}):Object(B.jsx)("p",{style:{color:"gray",margin:"10px 0px 7px 30px"},children:"B\u1ea1n ch\u01b0a tham gia nh\xf3m n\xe0o"}),Object(B.jsx)(N.a,{type:"text",className:"add-room",onClick:function(){return n(!0)},children:"T\u1ea1o nh\xf3m"}),Object(B.jsx)(V.a,{src:"mess.mp3",className:"audio"})]},"1")})},Ee=n(485),_e=n(473),Be=F.a.div(Te||(Te=Object(p.a)([" \ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 12px 16px;\nborder-bottom: 1px solid #ccc;\nbox-shadow: -4px -1px 9px 1px #ccc;\n\n.username {\n  margin-left: 10px;\n  font-size: 16pt;\n  font-weight: 700;\n}\n\n.logout:hover{\n    color: red;\n    border-radius: 50%;\n}\n\n.logout{\n    border-radius: 50%;\n}\n"])));var Pe,De,Je,qe,Ge=function(){var e=Object(o.useContext)(P).user,t=e.displayName,n=e.photoURL,i=e.uid,a=Object(o.useContext)(J).clearState;if(void 0!==i)var c=z.firestore().doc("/users/"+i);var r={status:"offline",last_changed:z.firestore.FieldValue.serverTimestamp()};return Object(B.jsxs)(Be,{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)(Y.a,{placement:"right",title:t,children:Object(B.jsx)(_e.a,{size:"large",src:n,children:n?"":null===t||void 0===t?void 0:t.charAt(0)})}),Object(B.jsx)(Z.a.Text,{className:"username",children:"Chat"})]}),Object(B.jsx)(Y.a,{title:"\u0110\u0103ng xu\u1ea5t",placement:"top",children:Object(B.jsx)(N.a,{className:"logout",icon:Object(B.jsx)(Ee.a,{}),style:{border:"none"},onClick:function(){L.signOut(),a(),c.update(r)}})})]})},Ke=Ve.a.Panel,We=Object(F.a)(Ke)(Pe||(Pe=Object(p.a)(["\n\n  \n\n\n  &&& {\n    .ant-collapse-header{\n        color: blue;\n        font-weight: 500;\n    }\n    p {\n      font-weight: 500;\n      \n    }\n\n    .ant-collapse-content-box {\n      padding: 0 40px;\n      max-height: 290px;\n      overflow-y: auto;\n    }\n\n    .add-room {\n      color: #123;\n      padding: 0;\n    }\n  }\n"]))),He=Object(F.a)(Z.a.Link)(De||(De=Object(p.a)(["\n  display: block;\n  margin-bottom: 5px;\n  color: blue;\n  \n"]))),Xe=F.a.div(Je||(Je=Object(p.a)(["\n    display: flex;\n    margin: 15px 10px 10px 0px;\n    .user{\n        color: #123;\n        margin-left: 10px;\n    }\n    .status{\n      color: blue;\n      position: absolute;\n      right: 8%;\n    }\n    .status1{\n        color: #555;\n        position: absolute;\n        right: 8%;\n      }\n    .status2{\n        color: #999;\n        position: absolute;\n        right: 8%;\n    }\n"]))),Ye=Object(F.a)(Ve.a)(qe||(qe=Object(p.a)(["\nborder-bottom: 1px solid #ccc;\nbox-shadow: 0px 9px 7px -9px #ccc;\n\n"])));var Ze,Qe=function(){var e=Object(o.useContext)(P).user.uid,t=E("users","");return Object(B.jsx)(Ye,{defaultActiveKey:"1",ghost:!0,children:Object(B.jsxs)(We,{header:"Danh s\xe1ch b\u1ea1n b\xe8",children:[Array.from(t).filter((function(t){return t.uid!==e})).map((function(e){return Object(B.jsxs)(Xe,{children:[Object(B.jsx)(_e.a,{size:"small",src:e.photoUrl,children:e.photoUrl?"":e.displayName.charAt(0)}),Object(B.jsx)(He,{className:"user",children:e.displayName}),"online"===e.status?Object(B.jsx)("p",{className:"status",children:"Online"}):Object(B.jsx)(B.Fragment,{}),"offline"===e.status?Object(B.jsx)("p",{className:"status2",children:"Offline"}):Object(B.jsx)(B.Fragment,{}),"away"===e.status?Object(B.jsx)("p",{className:"status1",children:"Sleep"}):Object(B.jsx)(B.Fragment,{})," "]},e.uid)}))," "]},"1")})},$e=F.a.div(Ze||(Ze=Object(p.a)(["\n  background: #fff;\n  color: black;\n  height: 100vh;\n  border-right: 1px solid #ccc;\n  magrin: 20px\n"])));var et=function(){return Object(B.jsx)($e,{children:Object(B.jsx)(l.a,{children:Object(B.jsxs)(d.a,{span:"24",children:[Object(B.jsx)(Ge,{}),Object(B.jsx)(ze,{}),Object(B.jsx)(Qe,{})]})})})};var tt=function(){return Object(B.jsx)("div",{children:Object(B.jsxs)(l.a,{children:[Object(B.jsx)(d.a,{span:"5",children:Object(B.jsx)(et,{})}),Object(B.jsx)(d.a,{span:"19",children:Object(B.jsx)(Ie,{})})]})})},nt=n(52),ot=n.n(nt),it=n(69),at=n(486),ct=n(487),rt=n(11),st=Z.a.Title,lt=new rt.default.auth.FacebookAuthProvider,dt=new rt.default.auth.GoogleAuthProvider;var ut=function(){var e=function(){var e=Object(it.a)(ot.a.mark((function e(){var t,n,o,i;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("granted"!==Notification.permission){e.next=9;break}return e.next=3,L.signInWithPopup(dt);case 3:t=e.sent,n=t.additionalUserInfo,o=t.user,n.isNewUser&&(H("users",{displayName:o.displayName,email:o.email,photoUrl:o.photoURL,uid:o.uid,providerId:n.providerId,keywords:X(null===(i=o.displayName)||void 0===i?void 0:i.toLowerCase()),countNotify:[],status:"",last_changed:""}),H("notifys",{countNotify:[],uid:o.uid})),e.next=11;break;case 9:alert("Vui l\xf2ng cho ph\xe9p th\xf4ng b\xe1o"),Notification.requestPermission();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)("div",{children:Object(B.jsx)(l.a,{justify:"center",style:{height:800},children:Object(B.jsxs)(d.a,{span:10,children:[Object(B.jsx)(st,{style:{textAlign:"center",margin:"30px"},level:2,children:"\u0110\u0103ng nh\u1eadp \u0111\u1ec3 tham gia v\u1edbi ch\xfang t\xf4i"}),Object(B.jsx)(N.a,{icon:Object(B.jsx)(at.a,{}),style:{width:"100%",fontSize:"16px",color:"red",height:"40px"},onClick:function(){return e()},children:"\u0110\u0103ng nh\u1eadp b\u1eb1ng Google"}),Object(B.jsx)(N.a,{icon:Object(B.jsx)(ct.a,{}),style:{marginTop:"5px",width:"100%",fontSize:"16px",color:"blue",height:"40px"},onClick:function(){L.signInWithPopup(lt)},children:"\u0110\u0103ng nh\u1eadp b\u1eb1ng Facebook (beta)"})]})})})},bt=n(258),pt=n(196),jt=n.n(pt),ht=n(82),xt=n.n(ht);function ft(){var e=Object(S.useForm)(),t=Object(b.a)(e,1)[0],n=Object(o.useContext)(J),i=n.isAddRoomVisible,a=n.setIsAddRoomVisible,c=Object(o.useContext)(P).user.uid,r=[];return Object(B.jsx)("div",{children:Object(B.jsx)(xt.a,{title:"T\u1ea1o nh\xf3m",visible:i,onOk:function(){var e,n;(null===(e=t.getFieldValue())||void 0===e?void 0:e.name)&&(null===(n=t.getFieldValue())||void 0===n?void 0:n.description)?(W("rooms",Object(M.a)(Object(M.a)({},t.getFieldsValue()),{},{members:[c]})),t.resetFields(),a(!1),T.collection("rooms").where("members","array-contains",c).orderBy("createAt").onSnapshot((function(e){var t,n=e.docs.map((function(e){return{id:e.id}})),o=null===(t=n[n.length-1])||void 0===t?void 0:t.id;Array.from(r).forEach((function(e){T.collection("notifys").doc(e.uid).collection(e.uid).doc(o).set({count:0})}))}))):bt.b.info("B\u1ea1n c\u1ea7n nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin")},onCancel:function(){a(!1)},children:Object(B.jsxs)(I.a,{layout:"vertical",form:t,children:[Object(B.jsx)(jt.a,{label:"T\xean nh\xf3m",name:"name",children:Object(B.jsx)(k.a,{name:"name",placeholder:"Nh\u1eadp t\xean nh\xf3m",autoComplete:"off",rules:[{required:!0}]})}),Object(B.jsx)(jt.a,{label:"M\xf4 t\u1ea3",name:"description",children:Object(B.jsx)(k.a,{name:"description",placeholder:"Nh\u1eadp m\xf4 t\u1ea3",autoComplete:"off",rules:[{required:!0}]})})]})})})}var mt=n(14),Ot=n(470),vt=n(253),gt=n.n(vt),yt=["fetchOptions","debounceTimeout","curMembers"];function wt(e){var t=e.fetchOptions,n=e.debounceTimeout,a=void 0===n?300:n,c=e.curMembers,r=Object(mt.a)(e,yt),s=Object(o.useState)(!1),l=Object(b.a)(s,2),d=l[0],u=l[1],p=Object(o.useState)([]),j=Object(b.a)(p,2),h=j[0],x=j[1],f=i.a.useMemo((function(){return gt()((function(e){x([]),u(!0),t(e,c).then((function(e){x(e),u(!1)}))}),a)}),[a,t,c]);return i.a.useEffect((function(){return function(){x([])}}),[]),Object(B.jsxs)(Ot.a,Object(M.a)(Object(M.a)({labelInValue:!0,filterOption:!1,onSearch:f,notFoundContent:d?Object(B.jsx)(_.a,{size:"small"}):Object(B.jsx)("p",{style:{marginTop:"10px",color:"#345"},children:"B\u1ea1n b\xe8 \u0111\xe3 \u1edf trong nh\xf3m s\u1ebd kh\xf4ng xu\u1ea5t hi\u1ec7n \u1edf \u0111\xe2y !"})},r),{},{children:[" ",h.map((function(e){var t,n;return Object(B.jsxs)(Ot.a.Option,{value:e.value,title:e.label,children:[Object(B.jsxs)(re.a,{size:"small",src:e.photoURL,children:[" ",e.photoURL?"":null===(t=e.label)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase()," "]})," ".concat(e.label)," "]},e.value)}))," "]}))}function Nt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=Object(it.a)(ot.a.mark((function e(t,n){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.collection("users").where("keywords","array-contains",null===t||void 0===t?void 0:t.toLowerCase()).orderBy("displayName").limit(20).get().then((function(e){return e.docs.map((function(e){return{label:e.data().displayName,value:e.data().uid,photoURL:e.data().photoURL}})).filter((function(e){return!n.includes(e.value)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){var e=Object(o.useContext)(J),t=e.isInviteMemberVisible,n=e.setIsInviteMemberVisible,i=e.selectedRoomId,a=e.selectedRoom,c=Object(o.useState)([]),r=Object(b.a)(c,2),s=r[0],l=r[1],d=g.a.useForm(),p=Object(b.a)(d,1)[0];return Object(B.jsx)("div",{children:Object(B.jsx)(xt.a,{title:"M\u1eddi th\xeam b\u1ea1n b\xe8",visible:t,onOk:function(){p.resetFields(),l([]),T.collection("rooms").doc(i).update({members:[].concat(Object(u.a)(a.members),Object(u.a)(s.map((function(e){return e.value}))))});var e=s.length;0!==e&&bt.b.success("\u0110\xe3 th\xeam "+e+" th\xe0nh vi\xean"),n(!1)},onCancel:function(){p.resetFields(),l([]),n(!1)},destroyOnClose:!0,children:Object(B.jsxs)(g.a,{form:p,layout:"vertical",children:[Object(B.jsx)("p",{children:"Nh\u1eadp h\u1ecd t\xean"}),Object(B.jsx)(wt,{mode:"multiple",name:"search-user",label:"T\xean c\xe1c th\xe0nh vi\xean",value:s,placeholder:"Nh\u1eadp * \u0111\u1ec3 hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 b\u1ea1n b\xe8",fetchOptions:Nt,onChange:function(e){return l(e)},style:{width:"100%"},curMembers:a.members})]})})})}var St,It,At=n(162),Rt=Object(F.a)(Z.a.Text)(St||(St=Object(p.a)(["\n  display: block;\n  margin-bottom: 5px;\n  color: blue;\n"]))),Vt=F.a.div(It||(It=Object(p.a)(["\n    display: flex;\n    margin: 15px 10px 10px 0px;\n    align-item: center;\n    .user{\n        color: #123;\n        margin: 7px 15px 9px 15px;\n        font-weight: 500;\n    }\n    .status{\n      color: #123;\n      position: absolute;\n      right: 8%;\n    }\n    p{\n        margin-top:6px;\n    }\n\n    .baChamIcon{\n        font-size:'15pt';\n        margin-top:'3px';\n    }\n"])));function Ft(){var e=Object(o.useContext)(J),t=e.members,n=e.setIsShowMembersVisible,i=e.isShowMembersVisible,a=Object(o.useContext)(P).user.uid,c=function(){n(!1)};return Object(B.jsxs)(xt.a,{title:"Danh s\xe1ch th\xe0nh vi\xean ("+Array.from(t).length+")",visible:i,onCancel:c,onOk:c,children:[Array.from(t).map((function(e){return Object(B.jsxs)(Vt,{children:[Object(B.jsx)(re.a,{size:"large",src:e.photoUrl,children:e.photoUrl?"":e.displayName.charAt(0)}),Object(B.jsx)(Rt,{className:"user",children:a===e.uid?"B\u1ea1n":e.displayName}),Object(B.jsx)(N.a,{style:{borderRadius:"50%",float:"right",position:"absolute",left:"85%",marginTop:"2px"},icon:Object(B.jsx)(At.a,{className:"baChamIcon"})})," "]},e.uid)}))," "]})}var Mt=function(){return Object(B.jsx)(r.a,{children:Object(B.jsx)(D,{children:Object(B.jsxs)(K,{children:[Object(B.jsxs)(s.c,{children:[Object(B.jsx)(s.a,{path:"/login",children:Object(B.jsx)(ut,{})}),Object(B.jsx)(s.a,{path:"/",children:Object(B.jsx)(tt,{})})]}),Object(B.jsx)(ft,{}),Object(B.jsx)(Ct,{}),Object(B.jsx)(Ft,{})]})})})};n(459);c.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(Mt,{})}),document.getElementById("root"))}},[[460,1,2]]]);
//# sourceMappingURL=main.f057121d.chunk.js.map